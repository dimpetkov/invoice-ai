import{r as n,j as e,G as T,i as M,c as G,R as H}from"./invoice-extraction-config-C6ESNmdC.js";const B="You are a helpful AI assistant named Gemini. Keep your responses concise and helpful. Format code snippets appropriately using markdown.",V=[{id:"balanced",name:"Balanced",description:"Optimal blend of speed and reasoning for most tasks.",cost:"Standard",model:"gemini-2.5-flash",config:{systemInstruction:B}},{id:"lightning",name:"Lightning",description:"Prioritizes response speed, ideal for quick queries.",cost:"Lower",model:"gemini-2.5-flash",config:{systemInstruction:B,thinkingConfig:{thinkingBudget:0}}}],O=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5",children:[e.jsx("path",{fillRule:"evenodd",d:"M11.25 3.5A1.75 1.75 0 0 0 9.5 5.25v1.5H11v-1.5a.25.25 0 0 1 .25-.25h1.5a.25.25 0 0 1 .25.25v1.5h1.5v-1.5A1.75 1.75 0 0 0 12.75 3.5h-1.5Z",clipRule:"evenodd"}),e.jsx("path",{d:"M3 6.5A1.5 1.5 0 0 1 4.5 5h11A1.5 1.5 0 0 1 17 6.5v7a1.5 1.5 0 0 1-1.5 1.5h-11A1.5 1.5 0 0 1 3 13.5v-7ZM4.5 6a.5.5 0 0 0-.5.5v7a.5.5 0 0 0 .5.5h11a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.5-.5h-11Z"}),e.jsx("path",{fillRule:"evenodd",d:"M8.75 16.5A1.75 1.75 0 0 0 10.5 14.75v-1.5H9v1.5a.25.25 0 0 1-.25.25h-1.5a.25.25 0 0 1-.25-.25v-1.5H5.5v1.5A1.75 1.75 0 0 0 7.25 16.5h1.5Z",clipRule:"evenodd"}),e.jsx("path",{d:"M8 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-7Z"})]}),U=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5",children:e.jsx("path",{fillRule:"evenodd",d:"M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"})}),z=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5 text-blue-500",children:e.jsx("path",{fillRule:"evenodd",d:"M16.704 4.153a.75.75 0 0 1 .143 1.052l-8 10.5a.75.75 0 0 1-1.127.075l-4.5-4.5a.75.75 0 0 1 1.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 0 1 1.05-.143Z",clipRule:"evenodd"})}),W=({modes:s,selectedMode:x,onSelect:b})=>{const[c,u]=n.useState(!1),d=n.useRef(null);n.useEffect(()=>{const a=j=>{d.current&&!d.current.contains(j.target)&&u(!1)};return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[]);const h=a=>{b(a),u(!1)};return e.jsxs("div",{className:"relative",ref:d,children:[e.jsxs("button",{onClick:()=>u(!c),className:"flex items-center gap-2 px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-sm font-medium transition-colors","aria-haspopup":"true","aria-expanded":c,children:[e.jsx(O,{}),e.jsx("span",{children:x.name}),e.jsx(U,{})]}),c&&e.jsx("div",{className:"absolute top-full right-0 mt-2 w-72 bg-gray-800 border border-gray-700 rounded-lg shadow-2xl z-20",children:e.jsx("div",{className:"p-2",children:s.map(a=>e.jsxs("div",{onClick:()=>h(a),className:"p-3 hover:bg-gray-700 rounded-md cursor-pointer",role:"option","aria-selected":x.id===a.id,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-semibold text-white",children:a.name}),e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-blue-600/30 text-blue-300 rounded-full",children:a.cost})]}),x.id===a.id&&e.jsx(z,{})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:a.description})]},a.id))})})]})},Y=()=>{const[s,x]=n.useState(null),[b,c]=n.useState(null),[u,d]=n.useState(!1),[h,a]=n.useState(null),[j,y]=n.useState(null),[L,N]=n.useState(""),C=n.useRef(null),k=r=>{var f;const i=(f=r.target.files)==null?void 0:f[0];if(i)if(x(i),a(null),y(null),i.type.startsWith("image/")){const g=new FileReader;g.onload=t=>{var l;c((l=t.target)==null?void 0:l.result)},g.readAsDataURL(i)}else c(null)},D=()=>{var f;const r=(f=M.extractionSettings)==null?void 0:f.delimiter,i=M.columns.map(g=>g.name).join(r);return`Ти си експерт по извличане на данни от фактури и счетоводни документи за българската счетоводна система (Плюс Минус).

КОНТЕКСТ:
- Потребителят подава ЕИК (регистрационен номер) на фирмата, за която се анализира документа. Този ЕИК ще наричаме ЕИК_ФИРМА.
- ЕИК_ФИРМА в този разговор е: ${L||"[ЕИК_ФИРМА не е подаден – ако не можеш еднозначно да определиш ролята на фирмата, не създавай ред]"}.

ЗАДАЧА:
Извлечи всички релевантни данни от предоставения документ (фактура/известие/трансфер) и върни резултата в CSV формат, съвместим със спецификацията във файла-описание.

CSV ФОРМАТ:
- Разделител между колоните: "${r}"
- Разделител на редовете: CRLF (\\r\\n)
- НЯМА заглавен ред – само редове с данни
- Кодиране: Windows-1251 (но можеш да работиш логически с UTF-8 – важно е съдържанието да е коректно на кирилица)

КОЛОНИ (${M.columns.length} общо, винаги в този ред):
${i}

ВАЖНИ ПРАВИЛА ЗА ЛОГИКАТА:
${M.extractionInstructions.map((g,t)=>`${t+1}. ${g}`).join(`
`)}

ВАЛИДАЦИЯ:
${Object.entries(M.validationRules).map(([g,t])=>`- ${g}: ${t}`).join(`
`)}

СПЕЦИАЛНИ БЕЛЕЖКИ:
- Всеки ред в CSV трябва да съдържа ТОЧНО ${M.columns.length} стойности, разделени с "${r}".
- Ако за колона няма данни, остави празно поле между разделителите (напр. ;;).
- Не използвай символи " ' / \\ & в текстови полета.
- Числата не трябва да съдържат валутни символи (лв., €, $ и др.).
- Всички дати трябва да са във формат dd.mm.yyyy.

ИЗХОД:
Върни САМО CSV данните, без допълнителен текст, обяснения или markdown форматиране.
Започни директно с редовете с данни (БЕЗ заглавия).`},I=async()=>{if(s){d(!0),y(null),a(null);try{throw new Error("API ключът не е конфигуриран. Моля, добавете VITE_API_KEY в .env файла.")}catch(r){console.error(r),y(r instanceof Error?r.message:"Възникна грешка при обработката на документа. Моля, опитайте отново.")}finally{d(!1)}}},A=()=>{if(!h)return;const r=new Blob([h.csv],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),f=URL.createObjectURL(r);i.setAttribute("href",f),i.setAttribute("download",h.fileName),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)},F=()=>{x(null),c(null),a(null),y(null),N(""),C.current&&(C.current.value="")};return e.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Извличане на данни от фактури"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Качете PDF или изображение на фактура за автоматично извличане на данни в CSV формат."}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"ЕИК на фирмата, за която се анализира документа (ЕИК_ФИРМА)"}),e.jsx("input",{type:"text",value:L,onChange:r=>N(r.target.value),placeholder:"Напр. 203287066",className:"w-full px-3 py-2 rounded-lg bg-gray-700 text-white border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Използва се, за да се определи дали документът е продажба или покупка и кой е партньорът."})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("input",{ref:C,type:"file",accept:"image/*,.pdf",onChange:k,className:"hidden"}),e.jsx("button",{onClick:()=>{var r;return(r=C.current)==null?void 0:r.click()},disabled:u,className:"w-full py-3 px-4 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-colors",children:s?"Смени файла":"Избери файл"})]}),s&&e.jsxs("div",{className:"mb-6 p-4 bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify между mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:s.name}),e.jsxs("p",{className:"text-gray-400 text-sm",children:[(s.size/1024).toFixed(2)," KB"]})]}),e.jsx("button",{onClick:F,className:"text-red-400 hover:text-red-300 text-sm",children:"Премахни"})]}),b&&e.jsx("img",{src:b,alt:"Preview",className:"max-w-full max-h-96 rounded-lg mx-auto"})]}),s&&!h&&e.jsx("button",{onClick:I,disabled:u,className:"w-full py-3 px-4 bg-green-600 hover:bg-green-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-colors mb-6",children:u?"Обработва се...":"Извлечи данни"}),j&&e.jsx("div",{className:"mb-6 p-4 bg-red-900/50 border border-red-500 rounded-lg",children:e.jsx("p",{className:"text-red-200",children:j})}),h&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-green-900/30 border border-green-500 rounded-lg",children:e.jsx("p",{className:"text-green-200 font-medium",children:"✓ Данните са извлечени успешно!"})}),e.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[e.jsx("h3",{className:"text-white font-medium mb-2",children:"CSV преглед:"}),e.jsx("pre",{className:"text-xs text-gray-300 overflow-x-auto bg-gray-900 p-3 rounded max-h-96 overflow-y-auto",children:h.csv})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:A,className:"flex-1 py-3 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Изтегли CSV"}),e.jsx("button",{onClick:F,className:"flex-1 py-3 px-4 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium transition-colors",children:"Нов документ"})]})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-800 rounded-lg",children:[e.jsx("h3",{className:"text-white font-medium mb-2",children:"Поддържани формати:"}),e.jsxs("ul",{className:"text-gray-400 text-sm space-y-1",children:[e.jsx("li",{children:"• PDF документи"}),e.jsx("li",{children:"• Изображения (JPG, PNG, WEBP)"}),e.jsx("li",{children:"• Фактури продажба/покупка"}),e.jsx("li",{children:"• Дебитни и кредитни известия"}),e.jsx("li",{children:"• Документи тип Трансфер (вид 8)"})]})]})]})},q=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M12 4a2 2 0 1 0 0 4 2 2 0 0 0 0-4Zm-2.5 6.5a2.5 2.5 0 1 0 5 0 2.5 2.5 0 0 0-5 0ZM12 1a9 9 0 0 0-9 9v6.5a2.5 2.5 0 0 0 2.5 2.5h13A2.5 2.5 0 0 0 21 16.5V10a9 9 0 0 0-9-9Zm7 15.5H5a.5.5 0 0 1-.5-.5V10a7 7 0 0 1 14 0v6a.5.5 0 0 1-.5.5Z",clipRule:"evenodd"})}),J=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M12 6a3.5 3.5 0 1 0 0 7 3.5 3.5 0 0 0 0-7Zm-5.5 9.5a1.5 1.5 0 0 1 1.5-1.5h8a1.5 1.5 0 0 1 1.5 1.5v.055A7.002 7.002 0 0 1 12 20a7.002 7.002 0 0 1-5.5-2.445V15.5ZM12 4a5.5 5.5 0 1 0 0 11 5.5 5.5 0 0 0 0-11Z",clipRule:"evenodd"})}),Q=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6",children:e.jsx("path",{d:"M3.478 2.404a.75.75 0 0 0-.926.941l2.432 7.905H13.5a.75.75 0 0 1 0 1.5H4.984l-2.432 7.905a.75.75 0 0 0 .926.94 60.519 60.519 0 0 0 18.445-8.986.75.75 0 0 0 0-1.218A60.517 60.517 0 0 0 3.478 2.404Z"})}),X=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:e.jsx("path",{fillRule:"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}),Z=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:e.jsx("path",{fillRule:"evenodd",d:"M18.97 3.659a2.25 2.25 0 0 0-3.182 0l-10.94 10.94a3.75 3.75 0 1 0 5.304 5.303l7.693-7.693a.75.75 0 0 1 1.06 1.06l-7.693 7.693a5.25 5.25 0 1 1-7.424-7.424l10.939-10.94a3.75 3.75 0 1 1 5.303 5.304L9.097 18.835l-.008.008-.007.007-.002.002-.003.002A2.25 2.25 0 0 1 5.91 15.66l7.81-7.81a.75.75 0 0 1 1.061 1.06l-7.81 7.81a.75.75 0 0 0 1.054 1.068L18.97 6.84a2.25 2.25 0 0 0 0-3.182Z",clipRule:"evenodd"})}),K=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-4 h-4",children:e.jsx("path",{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"})}),ee=()=>e.jsxs("div",{className:"flex items-center space-x-1.5",children:[e.jsx("div",{className:"h-2 w-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.3s]"}),e.jsx("div",{className:"h-2 w-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.15s]"}),e.jsx("div",{className:"h-2 w-2 bg-gray-400 rounded-full animate-bounce"})]}),te=({message:s,isLoading:x,isStreaming:b})=>{const c=s.role==="user";return s.role==="system"?e.jsx("div",{className:"text-center text-sm text-gray-500 my-4 italic",children:s.text}):e.jsxs("div",{className:`flex items-start gap-3 ${c?"justify-end":""}`,children:[!c&&e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-700 flex-shrink-0 flex items-center justify-center mt-1",children:e.jsx(q,{})}),e.jsxs("div",{className:`max-w-xl w-fit p-3 rounded-2xl ${c?"chat-bubble-gradient text-white rounded-br-lg":"bg-gray-700 text-gray-200 rounded-bl-lg"}`,children:[s.files&&s.files.length>0&&e.jsx("div",{className:"mb-2 flex flex-wrap gap-2",children:s.files.map((d,h)=>e.jsx("div",{className:"relative",children:d.preview?e.jsx("img",{src:d.preview,alt:d.name,className:"max-w-xs max-h-48 rounded-lg"}):e.jsxs("div",{className:"bg-gray-600 px-3 py-2 rounded-lg text-sm flex items-center gap-2",children:[e.jsx(Z,{}),e.jsx("span",{className:"truncate max-w-[200px]",children:d.name})]})},h))}),e.jsxs("p",{className:"whitespace-pre-wrap break-words",children:[s.text,x&&b&&!c&&e.jsx("span",{className:"inline-block w-1 h-4 bg-white animate-pulse ml-1 align-middle","aria-label":"typing indicator"})]}),x&&!b&&!c&&e.jsx(ee,{})]}),c&&e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-500 flex-shrink-0 flex items-center justify-center mt-1",children:e.jsx(J,{})})]})};function se(){const s={id:"init",role:"system",text:"Session started. Type a message to begin chatting with Gemini."},[x,b]=n.useState("chat"),[c,u]=n.useState([s]),[d,h]=n.useState(""),[a,j]=n.useState(!1),[y,L]=n.useState(V[0]),[N,C]=n.useState([]),k=n.useRef(null),D=n.useRef(null),I=n.useRef(null),A=n.useRef(null);n.useEffect(()=>{var t;(t=D.current)==null||t.scrollTo({top:D.current.scrollHeight,behavior:"smooth"})},[c]),n.useEffect(()=>{I.current&&(I.current.style.height="auto",I.current.style.height=`${I.current.scrollHeight}px`)},[d]);const F=()=>{k.current=null,u([s]),j(!1)},r=t=>{t.id!==y.id&&(L(t),k.current=null,u([{id:"mode-change-"+Date.now(),role:"system",text:`Model changed to ${t.name}. A new chat session has started.`}]),j(!1))},i=async t=>{const l=t.target.files;if(!l||l.length===0)return;const w=[];for(let m=0;m<l.length;m++){const o=l[m],R=new FileReader;await new Promise(S=>{R.onload=v=>{var $;const p=($=v.target)==null?void 0:$.result,E=p.split(",")[1],P={name:o.name,type:o.type,data:E};o.type.startsWith("image/")&&(P.preview=p),w.push(P),S()},R.readAsDataURL(o)})}C(m=>[...m,...w]),A.current&&(A.current.value="")},f=t=>{C(l=>l.filter((w,m)=>m!==t))},g=async t=>{t.preventDefault();const l=d.trim();if(!l&&N.length===0||a)return;const w={id:Date.now().toString(),role:"user",text:l||"(attached files)",files:N.length>0?[...N]:void 0};u(o=>[...o,w]),h(""),C([]),j(!0);const m=(Date.now()+1).toString();u(o=>[...o,{id:m,role:"model",text:""}]);try{if(!k.current)throw new Error("API_KEY is not set. Please ensure VITE_API_KEY is configured in your .env file.");let o;if(w.files&&w.files.length>0){const v=[];l&&v.push({text:l}),w.files.forEach(p=>{v.push({inlineData:{mimeType:p.type,data:p.data}})}),o={message:v}}else o={message:l};const R=await k.current.sendMessageStream(o);let S="";for await(const v of R)S+=v.text,u(p=>p.map(E=>E.id===m?{...E,text:S}:E))}catch(o){console.error(o);const R=o instanceof Error?o.message:"An unknown error occurred.",S={id:"error-"+Date.now(),role:"system",text:`Error: ${R}. Please check your API key configuration.`};u(v=>v.filter(p=>p.id!==m).concat(S))}finally{j(!1)}};return e.jsxs("div",{className:"bg-gray-900 text-gray-200 h-full flex flex-col antialiased",children:[e.jsxs("header",{className:"p-4 border-b border-gray-800 bg-gray-900/80 backdrop-blur-sm sticky top-0 z-10",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-lg font-bold text-white",children:"Gemini Chat"}),e.jsx("div",{className:"flex items-center gap-4",children:x==="chat"&&e.jsxs(e.Fragment,{children:[e.jsx(W,{modes:V,selectedMode:y,onSelect:r}),e.jsxs("button",{onClick:F,className:"flex items-center gap-2 px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-sm font-medium transition-colors",children:[e.jsx(X,{}),"New Chat"]})]})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>b("chat"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${x==="chat"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Chat"}),e.jsx("button",{onClick:()=>b("invoice"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${x==="invoice"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Invoice Extractor"})]})]}),x==="chat"?e.jsxs(e.Fragment,{children:[e.jsx("main",{ref:D,className:"flex-1 p-4 md:p-6 overflow-y-auto space-y-6",children:c.map((t,l)=>e.jsx(te,{message:t,isLoading:a&&l===c.length-1,isStreaming:t.text.length>0},t.id))}),e.jsx("footer",{className:"p-4 md:p-6 border-t border-gray-800 bg-gray-900",children:e.jsxs("form",{onSubmit:g,className:"max-w-3xl mx-auto",children:[N.length>0&&e.jsx("div",{className:"mb-3 flex flex-wrap gap-2",children:N.map((t,l)=>e.jsx("div",{className:"relative group",children:t.preview?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:t.preview,alt:t.name,className:"h-20 w-20 object-cover rounded-lg"}),e.jsx("button",{type:"button",onClick:()=>f(l),className:"absolute -top-2 -right-2 bg-red-500 hover:bg-red-600 rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(K,{})})]}):e.jsxs("div",{className:"relative bg-gray-700 px-3 py-2 rounded-lg text-sm flex items-center gap-2",children:[e.jsx(Z,{}),e.jsx("span",{className:"truncate max-w-[150px]",children:t.name}),e.jsx("button",{type:"button",onClick:()=>f(l),className:"ml-2 text-red-400 hover:text-red-300",children:e.jsx(K,{})})]})},l))}),e.jsxs("div",{className:"flex items-end gap-3",children:[e.jsx("input",{ref:A,type:"file",multiple:!0,accept:"image/*,.pdf,.txt,.doc,.docx",onChange:i,className:"hidden","aria-label":"File input"}),e.jsx("button",{type:"button",onClick:()=>{var t;return(t=A.current)==null?void 0:t.click()},disabled:a,className:"w-12 h-12 rounded-full bg-gray-700 hover:bg-gray-600 flex items-center justify-center transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Attach file",children:e.jsx(Z,{})}),e.jsx("div",{className:"flex-1 bg-gray-800 rounded-2xl p-1 flex items-end",children:e.jsx("textarea",{ref:I,value:d,onChange:t=>h(t.target.value),onKeyDown:t=>{t.key==="Enter"&&!t.shiftKey&&(t.preventDefault(),g(t))},placeholder:"Message Gemini...",className:"w-full bg-transparent p-2 resize-none border-none focus:ring-0 focus:outline-none placeholder-gray-500 max-h-48",rows:1,disabled:a,"aria-label":"Chat input"})}),e.jsx("button",{type:"submit",disabled:a||!d.trim()&&N.length===0,className:"w-12 h-12 rounded-full flex items-center justify-center transition-colors disabled:opacity-50 disabled:cursor-not-allowed chat-bubble-gradient text-white","aria-label":"Send message",children:e.jsx(Q,{})})]})]})})]}):e.jsx("main",{className:"flex-1 overflow-y-auto",children:e.jsx(Y,{})})]})}const _=document.getElementById("root");_&&G.createRoot(_).render(e.jsx(H.StrictMode,{children:e.jsx(se,{})}));
