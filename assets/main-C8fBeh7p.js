import{r as l,j as e,G as z,O as q,i as E,c as J,R as Q}from"./invoice-extraction-config-D31rbuU7.js";const V="You are a helpful AI assistant named Gemini. Keep your responses concise and helpful. Format code snippets appropriately using markdown.",T=[{id:"balanced",name:"Balanced",description:"Optimal blend of speed and reasoning for most tasks.",cost:"Standard",model:"gemini-2.5-flash",config:{systemInstruction:V}},{id:"lightning",name:"Lightning",description:"Prioritizes response speed, ideal for quick queries.",cost:"Lower",model:"gemini-2.5-flash",config:{systemInstruction:V,thinkingConfig:{thinkingBudget:0}}}],X=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5",children:[e.jsx("path",{fillRule:"evenodd",d:"M11.25 3.5A1.75 1.75 0 0 0 9.5 5.25v1.5H11v-1.5a.25.25 0 0 1 .25-.25h1.5a.25.25 0 0 1 .25.25v1.5h1.5v-1.5A1.75 1.75 0 0 0 12.75 3.5h-1.5Z",clipRule:"evenodd"}),e.jsx("path",{d:"M3 6.5A1.5 1.5 0 0 1 4.5 5h11A1.5 1.5 0 0 1 17 6.5v7a1.5 1.5 0 0 1-1.5 1.5h-11A1.5 1.5 0 0 1 3 13.5v-7ZM4.5 6a.5.5 0 0 0-.5.5v7a.5.5 0 0 0 .5.5h11a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.5-.5h-11Z"}),e.jsx("path",{fillRule:"evenodd",d:"M8.75 16.5A1.75 1.75 0 0 0 10.5 14.75v-1.5H9v1.5a.25.25 0 0 1-.25.25h-1.5a.25.25 0 0 1-.25-.25v-1.5H5.5v1.5A1.75 1.75 0 0 0 7.25 16.5h1.5Z",clipRule:"evenodd"}),e.jsx("path",{d:"M8 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-7Z"})]}),ee=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5",children:e.jsx("path",{fillRule:"evenodd",d:"M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"})}),se=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5 text-blue-500",children:e.jsx("path",{fillRule:"evenodd",d:"M16.704 4.153a.75.75 0 0 1 .143 1.052l-8 10.5a.75.75 0 0 1-1.127.075l-4.5-4.5a.75.75 0 0 1 1.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 0 1 1.05-.143Z",clipRule:"evenodd"})}),te=({modes:n,selectedMode:h,onSelect:y})=>{const[d,u]=l.useState(!1),x=l.useRef(null);l.useEffect(()=>{const i=j=>{x.current&&!x.current.contains(j.target)&&u(!1)};return document.addEventListener("mousedown",i),()=>{document.removeEventListener("mousedown",i)}},[]);const f=i=>{y(i),u(!1)};return e.jsxs("div",{className:"relative",ref:x,children:[e.jsxs("button",{onClick:()=>u(!d),className:"flex items-center gap-2 px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-sm font-medium transition-colors","aria-haspopup":"true","aria-expanded":d,children:[e.jsx(X,{}),e.jsx("span",{children:h.name}),e.jsx(ee,{})]}),d&&e.jsx("div",{className:"absolute top-full right-0 mt-2 w-72 bg-gray-800 border border-gray-700 rounded-lg shadow-2xl z-20",children:e.jsx("div",{className:"p-2",children:n.map(i=>e.jsxs("div",{onClick:()=>f(i),className:"p-3 hover:bg-gray-700 rounded-md cursor-pointer",role:"option","aria-selected":h.id===i.id,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-semibold text-white",children:i.name}),e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-blue-600/30 text-blue-300 rounded-full",children:i.cost})]}),h.id===i.id&&e.jsx(se,{})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:i.description})]},i.id))})})]})},ae=()=>{const[n,h]=l.useState(null),[y,d]=l.useState(null),[u,x]=l.useState(!1),[f,i]=l.useState(null),[j,v]=l.useState(null),[D,C]=l.useState(""),[R,I]=l.useState("gemini-2.0-flash-exp"),[A,S]=l.useState(""),[w,$]=l.useState(""),[g,G]=l.useState("gemini"),[F,P]=l.useState(!1),a=l.useRef(null);l.useEffect(()=>{const s=localStorage.getItem("gemini_api_key"),t=localStorage.getItem("openai_api_key"),r=localStorage.getItem("ai_provider"),c=localStorage.getItem("gemini_model");s&&S(s),t&&$(t),r&&G(r),c&&I(c),!s&&!t&&P(!0)},[]);const o=(s,t,r,c)=>{s&&(localStorage.setItem("gemini_api_key",s),S(s)),t&&(localStorage.setItem("openai_api_key",t),$(t)),localStorage.setItem("ai_provider",r),localStorage.setItem("gemini_model",c),G(r),I(c),P(!1),v(null)},N=s=>{var r;const t=(r=s.target.files)==null?void 0:r[0];if(t)if(h(t),i(null),v(null),t.type.startsWith("image/")){const c=new FileReader;c.onload=p=>{var _;d((_=p.target)==null?void 0:_.result)},c.readAsDataURL(t)}else d(null)},b=()=>{var r;const s=(r=E.extractionSettings)==null?void 0:r.delimiter,t=E.columns.map(c=>c.name).join(s);return`Ð¢Ð¸ ÑÐ¸ ÐµÐºÑÐ¿ÐµÑ€Ñ‚ Ð¿Ð¾ Ð¸Ð·Ð²Ð»Ð¸Ñ‡Ð°Ð½Ðµ Ð½Ð° Ð´Ð°Ð½Ð½Ð¸ Ð¾Ñ‚ Ñ„Ð°ÐºÑ‚ÑƒÑ€Ð¸ Ð¸ ÑÑ‡ÐµÑ‚Ð¾Ð²Ð¾Ð´Ð½Ð¸ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¸ Ð·Ð° Ð±ÑŠÐ»Ð³Ð°Ñ€ÑÐºÐ°Ñ‚Ð° ÑÑ‡ÐµÑ‚Ð¾Ð²Ð¾Ð´Ð½Ð° ÑÐ¸ÑÑ‚ÐµÐ¼Ð° (ÐŸÐ»ÑŽÑ ÐœÐ¸Ð½ÑƒÑ).

ÐšÐžÐÐ¢Ð•ÐšÐ¡Ð¢:
- ÐŸÐ¾Ñ‚Ñ€ÐµÐ±Ð¸Ñ‚ÐµÐ»ÑÑ‚ Ð¿Ð¾Ð´Ð°Ð²Ð° Ð•Ð˜Ðš (Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ð¾Ð½ÐµÐ½ Ð½Ð¾Ð¼ÐµÑ€) Ð½Ð° Ñ„Ð¸Ñ€Ð¼Ð°Ñ‚Ð°, Ð·Ð° ÐºÐ¾ÑÑ‚Ð¾ ÑÐµ Ð°Ð½Ð°Ð»Ð¸Ð·Ð¸Ñ€Ð° Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°. Ð¢Ð¾Ð·Ð¸ Ð•Ð˜Ðš Ñ‰Ðµ Ð½Ð°Ñ€Ð¸Ñ‡Ð°Ð¼Ðµ Ð•Ð˜Ðš_Ð¤Ð˜Ð ÐœÐ.
- Ð•Ð˜Ðš_Ð¤Ð˜Ð ÐœÐ Ð² Ñ‚Ð¾Ð·Ð¸ Ñ€Ð°Ð·Ð³Ð¾Ð²Ð¾Ñ€ Ðµ: ${D||"[Ð•Ð˜Ðš_Ð¤Ð˜Ð ÐœÐ Ð½Ðµ Ðµ Ð¿Ð¾Ð´Ð°Ð´ÐµÐ½ â€“ Ð°ÐºÐ¾ Ð½Ðµ Ð¼Ð¾Ð¶ÐµÑˆ ÐµÐ´Ð½Ð¾Ð·Ð½Ð°Ñ‡Ð½Ð¾ Ð´Ð° Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»Ð¸Ñˆ Ñ€Ð¾Ð»ÑÑ‚Ð° Ð½Ð° Ñ„Ð¸Ñ€Ð¼Ð°Ñ‚Ð°, Ð½Ðµ ÑÑŠÐ·Ð´Ð°Ð²Ð°Ð¹ Ñ€ÐµÐ´]"}.

Ð—ÐÐ”ÐÐ§Ð:
Ð˜Ð·Ð²Ð»ÐµÑ‡Ð¸ Ð²ÑÐ¸Ñ‡ÐºÐ¸ Ñ€ÐµÐ»ÐµÐ²Ð°Ð½Ñ‚Ð½Ð¸ Ð´Ð°Ð½Ð½Ð¸ Ð¾Ñ‚ Ð¿Ñ€ÐµÐ´Ð¾ÑÑ‚Ð°Ð²ÐµÐ½Ð¸Ñ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚ (Ñ„Ð°ÐºÑ‚ÑƒÑ€Ð°/Ð¸Ð·Ð²ÐµÑÑ‚Ð¸Ðµ/Ñ‚Ñ€Ð°Ð½ÑÑ„ÐµÑ€) Ð¸ Ð²ÑŠÑ€Ð½Ð¸ Ñ€ÐµÐ·ÑƒÐ»Ñ‚Ð°Ñ‚Ð° Ð² CSV Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚, ÑÑŠÐ²Ð¼ÐµÑÑ‚Ð¸Ð¼ ÑÑŠÑ ÑÐ¿ÐµÑ†Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸ÑÑ‚Ð° Ð²ÑŠÐ² Ñ„Ð°Ð¹Ð»Ð°-Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ðµ.

CSV Ð¤ÐžÐ ÐœÐÐ¢:
- Ð Ð°Ð·Ð´ÐµÐ»Ð¸Ñ‚ÐµÐ» Ð¼ÐµÐ¶Ð´Ñƒ ÐºÐ¾Ð»Ð¾Ð½Ð¸Ñ‚Ðµ: "${s}"
- Ð Ð°Ð·Ð´ÐµÐ»Ð¸Ñ‚ÐµÐ» Ð½Ð° Ñ€ÐµÐ´Ð¾Ð²ÐµÑ‚Ðµ: CRLF (\\r\\n)
- ÐÐ¯ÐœÐ Ð·Ð°Ð³Ð»Ð°Ð²ÐµÐ½ Ñ€ÐµÐ´ â€“ ÑÐ°Ð¼Ð¾ Ñ€ÐµÐ´Ð¾Ð²Ðµ Ñ Ð´Ð°Ð½Ð½Ð¸
- ÐšÐ¾Ð´Ð¸Ñ€Ð°Ð½Ðµ: Windows-1251 (Ð½Ð¾ Ð¼Ð¾Ð¶ÐµÑˆ Ð´Ð° Ñ€Ð°Ð±Ð¾Ñ‚Ð¸Ñˆ Ð»Ð¾Ð³Ð¸Ñ‡ÐµÑÐºÐ¸ Ñ UTF-8 â€“ Ð²Ð°Ð¶Ð½Ð¾ Ðµ ÑÑŠÐ´ÑŠÑ€Ð¶Ð°Ð½Ð¸ÐµÑ‚Ð¾ Ð´Ð° Ðµ ÐºÐ¾Ñ€ÐµÐºÑ‚Ð½Ð¾ Ð½Ð° ÐºÐ¸Ñ€Ð¸Ð»Ð¸Ñ†Ð°)

ÐšÐžÐ›ÐžÐÐ˜ (${E.columns.length} Ð¾Ð±Ñ‰Ð¾, Ð²Ð¸Ð½Ð°Ð³Ð¸ Ð² Ñ‚Ð¾Ð·Ð¸ Ñ€ÐµÐ´):
${t}

Ð’ÐÐ–ÐÐ˜ ÐŸÐ ÐÐ’Ð˜Ð›Ð Ð—Ð Ð›ÐžÐ“Ð˜ÐšÐÐ¢Ð:
${E.extractionInstructions.map((c,p)=>`${p+1}. ${c}`).join(`
`)}

Ð’ÐÐ›Ð˜Ð”ÐÐ¦Ð˜Ð¯:
${Object.entries(E.validationRules).map(([c,p])=>`- ${c}: ${p}`).join(`
`)}

Ð¡ÐŸÐ•Ð¦Ð˜ÐÐ›ÐÐ˜ Ð‘Ð•Ð›Ð•Ð–ÐšÐ˜:
- Ð’ÑÐµÐºÐ¸ Ñ€ÐµÐ´ Ð² CSV Ñ‚Ñ€ÑÐ±Ð²Ð° Ð´Ð° ÑÑŠÐ´ÑŠÑ€Ð¶Ð° Ð¢ÐžÐ§ÐÐž ${E.columns.length} ÑÑ‚Ð¾Ð¹Ð½Ð¾ÑÑ‚Ð¸, Ñ€Ð°Ð·Ð´ÐµÐ»ÐµÐ½Ð¸ Ñ "${s}".
- ÐÐºÐ¾ Ð·Ð° ÐºÐ¾Ð»Ð¾Ð½Ð° Ð½ÑÐ¼Ð° Ð´Ð°Ð½Ð½Ð¸, Ð¾ÑÑ‚Ð°Ð²Ð¸ Ð¿Ñ€Ð°Ð·Ð½Ð¾ Ð¿Ð¾Ð»Ðµ Ð¼ÐµÐ¶Ð´Ñƒ Ñ€Ð°Ð·Ð´ÐµÐ»Ð¸Ñ‚ÐµÐ»Ð¸Ñ‚Ðµ (Ð½Ð°Ð¿Ñ€. ;;).
- ÐÐµ Ð¸Ð·Ð¿Ð¾Ð»Ð·Ð²Ð°Ð¹ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¸ " ' / \\ & Ð² Ñ‚ÐµÐºÑÑ‚Ð¾Ð²Ð¸ Ð¿Ð¾Ð»ÐµÑ‚Ð°.
- Ð§Ð¸ÑÐ»Ð°Ñ‚Ð° Ð½Ðµ Ñ‚Ñ€ÑÐ±Ð²Ð° Ð´Ð° ÑÑŠÐ´ÑŠÑ€Ð¶Ð°Ñ‚ Ð²Ð°Ð»ÑƒÑ‚Ð½Ð¸ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¸ (Ð»Ð²., â‚¬, $ Ð¸ Ð´Ñ€.).
- Ð’ÑÐ¸Ñ‡ÐºÐ¸ Ð´Ð°Ñ‚Ð¸ Ñ‚Ñ€ÑÐ±Ð²Ð° Ð´Ð° ÑÐ° Ð²ÑŠÐ² Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚ dd.mm.yyyy.

Ð˜Ð—Ð¥ÐžÐ”:
Ð’ÑŠÑ€Ð½Ð¸ Ð¡ÐÐœÐž CSV Ð´Ð°Ð½Ð½Ð¸Ñ‚Ðµ, Ð±ÐµÐ· Ð´Ð¾Ð¿ÑŠÐ»Ð½Ð¸Ñ‚ÐµÐ»ÐµÐ½ Ñ‚ÐµÐºÑÑ‚, Ð¾Ð±ÑÑÐ½ÐµÐ½Ð¸Ñ Ð¸Ð»Ð¸ markdown Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ð¸Ñ€Ð°Ð½Ðµ.
Ð—Ð°Ð¿Ð¾Ñ‡Ð½Ð¸ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð½Ð¾ Ñ Ñ€ÐµÐ´Ð¾Ð²ÐµÑ‚Ðµ Ñ Ð´Ð°Ð½Ð½Ð¸ (Ð‘Ð•Ð— Ð·Ð°Ð³Ð»Ð°Ð²Ð¸Ñ).`},m=async()=>{if(!n)return;const s=g==="gemini"?A:w;if(!s){v(`ÐœÐ¾Ð»Ñ, Ð²ÑŠÐ²ÐµÐ´ÐµÑ‚Ðµ ${g==="gemini"?"Gemini":"OpenAI"} API ÐºÐ»ÑŽÑ‡`),P(!0);return}x(!0),v(null),i(null);try{const t=new FileReader,r=await new Promise((K,L)=>{t.onload=B=>{var Z;const Y=((Z=B.target)==null?void 0:Z.result).split(",")[1];K(Y)},t.onerror=L,t.readAsDataURL(n)}),c=b();let p="";g==="gemini"?p=((await new z({apiKey:s}).chats.create({model:R}).sendMessage({message:[{text:c},{inlineData:{mimeType:n.type,data:r}}]})).text||"").trim():p=((await new q({apiKey:s,dangerouslyAllowBrowser:!0}).chat.completions.create({model:"gpt-4o-mini",messages:[{role:"user",content:[{type:"text",text:c},{type:"image_url",image_url:{url:`data:${n.type};base64,${r}`}}]}],max_tokens:4096})).choices[0].message.content||"").trim();let _=p;p.startsWith("```")&&(_=p.replace(/```csv\n?/g,"").replace(/```\n?/g,"").trim());const W=`invoice_${n.name.split(".")[0]}_${Date.now()}.csv`;i({csv:_,fileName:W})}catch(t){console.error(t),v(t instanceof Error?t.message:"Ð’ÑŠÐ·Ð½Ð¸ÐºÐ½Ð° Ð³Ñ€ÐµÑˆÐºÐ° Ð¿Ñ€Ð¸ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ°Ñ‚Ð° Ð½Ð° Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°. ÐœÐ¾Ð»Ñ, Ð¾Ð¿Ð¸Ñ‚Ð°Ð¹Ñ‚Ðµ Ð¾Ñ‚Ð½Ð¾Ð²Ð¾.")}finally{x(!1)}},M=()=>{if(!f)return;const s=new Blob([f.csv],{type:"text/csv;charset=utf-8;"}),t=document.createElement("a"),r=URL.createObjectURL(s);t.setAttribute("href",r),t.setAttribute("download",f.fileName),t.style.visibility="hidden",document.body.appendChild(t),t.click(),document.body.removeChild(t)},k=()=>{h(null),d(null),i(null),v(null),C(""),a.current&&(a.current.value="")};return F?e.jsx("div",{className:"max-w-4xl mx-auto p-6",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 shadow-lg",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ð½Ð° AI Provider"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Ð˜Ð·Ð±ÐµÑ€ÐµÑ‚Ðµ AI Ð¼Ð¾Ð´ÐµÐ» Ð¸ Ð²ÑŠÐ²ÐµÐ´ÐµÑ‚Ðµ ÑÑŠÐ¾Ñ‚Ð²ÐµÑ‚Ð½Ð¸Ñ API ÐºÐ»ÑŽÑ‡. ÐšÐ»ÑŽÑ‡Ð¾Ð²ÐµÑ‚Ðµ Ñ‰Ðµ Ð±ÑŠÐ´Ð°Ñ‚ Ð·Ð°Ð¿Ð°Ð·ÐµÐ½Ð¸ Ð»Ð¾ÐºÐ°Ð»Ð½Ð¾ Ð²ÑŠÐ² Ð²Ð°ÑˆÐ¸Ñ Ð±Ñ€Ð°ÑƒÐ·ÑŠÑ€."}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-white font-medium mb-3",children:"Ð˜Ð·Ð±ÐµÑ€ÐµÑ‚Ðµ AI Provider:"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"provider",value:"gemini",checked:g==="gemini",onChange:s=>G(s.target.value),className:"w-4 h-4"}),e.jsx("span",{className:"text-white",children:"Google Gemini"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"provider",value:"openai",checked:g==="openai",onChange:s=>G(s.target.value),className:"w-4 h-4"}),e.jsx("span",{className:"text-white",children:"OpenAI GPT-4o Mini"})]})]})]}),g==="gemini"&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-white font-medium mb-2",children:"Gemini ÐœÐ¾Ð´ÐµÐ»:"}),e.jsxs("select",{value:R,onChange:s=>I(s.target.value),className:"w-full px-4 py-3 bg-gray-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"gemini-2.0-flash-exp",children:"Gemini 2.0 Flash (Experimental) - ÐÐ°Ð¹-Ð±ÑŠÑ€Ð·"}),e.jsx("option",{value:"gemini-2.0-pro-exp",children:"Gemini 2.0 Pro (Experimental) - ÐœÐ¾Ñ‰ÐµÐ½, Ð½Ð¾Ð²"}),e.jsx("option",{value:"gemini-1.5-flash",children:"Gemini 1.5 Flash - Ð¡Ñ‚Ð°Ð±Ð¸Ð»ÐµÐ½, Ð±ÑŠÑ€Ð·"}),e.jsx("option",{value:"gemini-1.5-pro",children:"Gemini 1.5 Pro - ÐŸÐ¾-Ð¼Ð¾Ñ‰ÐµÐ½"}),e.jsx("option",{value:"gemini-2.5-flash",children:"Gemini 2.5 Flash - ÐÐ¾Ð², Ð±ÑŠÑ€Ð·"}),e.jsx("option",{value:"gemini-2.5-pro",children:"Gemini 2.5 Pro - ÐÐ°Ð¹-Ð¼Ð¾Ñ‰ÐµÐ½"})]}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Flash Ð¼Ð¾Ð´ÐµÐ»Ð¸Ñ‚Ðµ ÑÐ° Ð¿Ð¾-Ð±ÑŠÑ€Ð·Ð¸ Ð¸ ÐµÐ²Ñ‚Ð¸Ð½Ð¸, Pro Ð¼Ð¾Ð´ÐµÐ»Ð¸Ñ‚Ðµ ÑÐ° Ð¿Ð¾-Ñ‚Ð¾Ñ‡Ð½Ð¸ Ð½Ð¾ Ð¿Ð¾-ÑÐºÑŠÐ¿Ð¸"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-white font-medium mb-2",children:["Gemini API Key:",g==="gemini"&&e.jsx("span",{className:"text-red-400 ml-1",children:"*"})]}),e.jsx("input",{type:"password",value:A,onChange:s=>S(s.target.value),placeholder:"Ð’ÑŠÐ²ÐµÐ´ÐµÑ‚Ðµ Gemini API ÐºÐ»ÑŽÑ‡...",className:"w-full px-4 py-3 bg-gray-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsxs("p",{className:"text-gray-400 text-sm mt-1",children:["ÐŸÐ¾Ð»ÑƒÑ‡ÐµÑ‚Ðµ Ð¾Ñ‚: ",e.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 underline",children:"Google AI Studio"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"block text-white font-medium mb-2",children:["OpenAI API Key:",g==="openai"&&e.jsx("span",{className:"text-red-400 ml-1",children:"*"})]}),e.jsx("input",{type:"password",value:w,onChange:s=>$(s.target.value),placeholder:"Ð’ÑŠÐ²ÐµÐ´ÐµÑ‚Ðµ OpenAI API ÐºÐ»ÑŽÑ‡...",className:"w-full px-4 py-3 bg-gray-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsxs("p",{className:"text-gray-400 text-sm mt-1",children:["ÐŸÐ¾Ð»ÑƒÑ‡ÐµÑ‚Ðµ Ð¾Ñ‚: ",e.jsx("a",{href:"https://platform.openai.com/api-keys",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 underline",children:"OpenAI Platform"})]})]}),e.jsxs("div",{className:"flex gap-3 mb-4",children:[e.jsx("button",{onClick:()=>{if(!(g==="gemini"?A:w).trim()){v(`ÐœÐ¾Ð»Ñ, Ð²ÑŠÐ²ÐµÐ´ÐµÑ‚Ðµ ${g==="gemini"?"Gemini":"OpenAI"} API ÐºÐ»ÑŽÑ‡`);return}o(A,w,g,R)},className:"flex-1 py-3 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"ðŸ’¾ Ð—Ð°Ð¿Ð°Ð·Ð¸ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸"}),(A||w)&&e.jsx("button",{onClick:()=>P(!1),className:"flex-1 py-3 px-4 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium transition-colors",children:"â† ÐÐ°Ð·Ð°Ð´"})]}),j&&e.jsx("div",{className:"p-4 bg-red-900/50 border border-red-500 rounded-lg",children:e.jsx("p",{className:"text-red-200",children:j})}),e.jsx("div",{className:"mt-4 p-4 bg-blue-900/30 border border-blue-500 rounded-lg",children:e.jsxs("p",{className:"text-blue-200 text-sm",children:[e.jsx("strong",{children:"Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð·Ð° Ð¼Ð¾Ð´ÐµÐ»Ð¸Ñ‚Ðµ:"}),e.jsx("br",{}),"â€¢ ",e.jsx("strong",{children:"Gemini:"})," ÐŸÐ¾-ÐµÐ²Ñ‚Ð¸Ð½ (~$0.001 Ð½Ð° Ñ„Ð°ÐºÑ‚ÑƒÑ€Ð°), Ð¿Ð¾-Ð±ÑŠÑ€Ð·",e.jsx("br",{}),"â€¢ ",e.jsx("strong",{children:"OpenAI:"})," ÐŸÐ¾-ÑÐºÑŠÐ¿ (~$0.01 Ð½Ð° Ñ„Ð°ÐºÑ‚ÑƒÑ€Ð°), GPT-4o Mini Ð¼Ð¾Ð´ÐµÐ»",e.jsx("br",{}),e.jsx("br",{}),"ÐœÐ¾Ð¶ÐµÑ‚Ðµ Ð´Ð° Ð²ÑŠÐ²ÐµÐ´ÐµÑ‚Ðµ ÐºÐ»ÑŽÑ‡Ð¾Ð²Ðµ Ð¸ Ð·Ð° Ð´Ð²Ð°Ñ‚Ð° Ð¼Ð¾Ð´ÐµÐ»Ð° Ð¸ Ð´Ð° Ð¿Ñ€ÐµÐ²ÐºÐ»ÑŽÑ‡Ð²Ð°Ñ‚Ðµ Ð¼ÐµÐ¶Ð´Ñƒ Ñ‚ÑÑ…."]})})]})}):e.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Ð˜Ð·Ð²Ð»Ð¸Ñ‡Ð°Ð½Ðµ Ð½Ð° Ð´Ð°Ð½Ð½Ð¸ Ð¾Ñ‚ Ñ„Ð°ÐºÑ‚ÑƒÑ€Ð¸"}),e.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["ÐœÐ¾Ð´ÐµÐ»: ",e.jsx("span",{className:"text-blue-400 font-medium",children:g==="gemini"?`ðŸ¤– ${R.replace("gemini-","Gemini ").replace("-exp"," (Exp)").replace("-"," ").split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" ")}`:"ðŸ§  OpenAI GPT-4o Mini"})]})]}),e.jsx("button",{onClick:()=>P(!0),className:"text-sm text-blue-400 hover:text-blue-300",children:"âš™ï¸ API Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸"})]}),e.jsx("p",{className:"text-gray-400 mb-6",children:"ÐšÐ°Ñ‡ÐµÑ‚Ðµ PDF Ð¸Ð»Ð¸ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð½Ð° Ñ„Ð°ÐºÑ‚ÑƒÑ€Ð° Ð·Ð° Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡Ð½Ð¾ Ð¸Ð·Ð²Ð»Ð¸Ñ‡Ð°Ð½Ðµ Ð½Ð° Ð´Ð°Ð½Ð½Ð¸ Ð² CSV Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚."}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Ð•Ð˜Ðš Ð½Ð° Ñ„Ð¸Ñ€Ð¼Ð°Ñ‚Ð°, Ð·Ð° ÐºÐ¾ÑÑ‚Ð¾ ÑÐµ Ð°Ð½Ð°Ð»Ð¸Ð·Ð¸Ñ€Ð° Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð° (Ð•Ð˜Ðš_Ð¤Ð˜Ð ÐœÐ)"}),e.jsx("input",{type:"text",value:D,onChange:s=>C(s.target.value),placeholder:"ÐÐ°Ð¿Ñ€. 999999999",className:"w-full px-3 py-2 rounded-lg bg-gray-700 text-white border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Ð˜Ð·Ð¿Ð¾Ð»Ð·Ð²Ð° ÑÐµ, Ð·Ð° Ð´Ð° ÑÐµ Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»Ð¸ Ð´Ð°Ð»Ð¸ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚ÑŠÑ‚ Ðµ Ð¿Ñ€Ð¾Ð´Ð°Ð¶Ð±Ð° Ð¸Ð»Ð¸ Ð¿Ð¾ÐºÑƒÐ¿ÐºÐ° Ð¸ ÐºÐ¾Ð¹ Ðµ Ð¿Ð°Ñ€Ñ‚Ð½ÑŒÐ¾Ñ€ÑŠÑ‚."})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("input",{ref:a,type:"file",accept:"image/*,.pdf",onChange:N,className:"hidden"}),e.jsx("button",{onClick:()=>{var s;return(s=a.current)==null?void 0:s.click()},disabled:u,className:"w-full py-3 px-4 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-colors",children:n?"Ð¡Ð¼ÐµÐ½Ð¸ Ñ„Ð°Ð¹Ð»Ð°":"Ð˜Ð·Ð±ÐµÑ€Ð¸ Ñ„Ð°Ð¹Ð»"})]}),n&&e.jsxs("div",{className:"mb-6 p-4 bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify Ð¼ÐµÐ¶Ð´Ñƒ mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:n.name}),e.jsxs("p",{className:"text-gray-400 text-sm",children:[(n.size/1024).toFixed(2)," KB"]})]}),e.jsx("button",{onClick:k,className:"text-red-400 hover:text-red-300 text-sm",children:"ÐŸÑ€ÐµÐ¼Ð°Ñ…Ð½Ð¸"})]}),y&&e.jsx("img",{src:y,alt:"Preview",className:"max-w-full max-h-96 rounded-lg mx-auto"})]}),n&&!f&&e.jsx("button",{onClick:m,disabled:u,className:"w-full py-3 px-4 bg-green-600 hover:bg-green-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-colors mb-6",children:u?"ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚Ð²Ð° ÑÐµ...":"Ð˜Ð·Ð²Ð»ÐµÑ‡Ð¸ Ð´Ð°Ð½Ð½Ð¸"}),j&&e.jsx("div",{className:"mb-6 p-4 bg-red-900/50 border border-red-500 rounded-lg",children:e.jsx("p",{className:"text-red-200",children:j})}),f&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-green-900/30 border border-green-500 rounded-lg",children:e.jsx("p",{className:"text-green-200 font-medium",children:"âœ“ Ð”Ð°Ð½Ð½Ð¸Ñ‚Ðµ ÑÐ° Ð¸Ð·Ð²Ð»ÐµÑ‡ÐµÐ½Ð¸ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾!"})}),e.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[e.jsx("h3",{className:"text-white font-medium mb-2",children:"CSV Ð¿Ñ€ÐµÐ³Ð»ÐµÐ´:"}),e.jsx("pre",{className:"text-xs text-gray-300 overflow-x-auto bg-gray-900 p-3 rounded max-h-96 overflow-y-auto",children:f.csv})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:M,className:"flex-1 py-3 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Ð˜Ð·Ñ‚ÐµÐ³Ð»Ð¸ CSV"}),e.jsx("button",{onClick:k,className:"flex-1 py-3 px-4 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium transition-colors",children:"ÐÐ¾Ð² Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚"})]})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-800 rounded-lg",children:[e.jsx("h3",{className:"text-white font-medium mb-2",children:"ÐŸÐ¾Ð´Ð´ÑŠÑ€Ð¶Ð°Ð½Ð¸ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ð¸:"}),e.jsxs("ul",{className:"text-gray-400 text-sm space-y-1",children:[e.jsx("li",{children:"â€¢ PDF Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¸"}),e.jsx("li",{children:"â€¢ Ð˜Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ (JPG, PNG, WEBP)"}),e.jsx("li",{children:"â€¢ Ð¤Ð°ÐºÑ‚ÑƒÑ€Ð¸ Ð¿Ñ€Ð¾Ð´Ð°Ð¶Ð±Ð°/Ð¿Ð¾ÐºÑƒÐ¿ÐºÐ°"}),e.jsx("li",{children:"â€¢ Ð”ÐµÐ±Ð¸Ñ‚Ð½Ð¸ Ð¸ ÐºÑ€ÐµÐ´Ð¸Ñ‚Ð½Ð¸ Ð¸Ð·Ð²ÐµÑÑ‚Ð¸Ñ"}),e.jsx("li",{children:"â€¢ Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¸ Ñ‚Ð¸Ð¿ Ð¢Ñ€Ð°Ð½ÑÑ„ÐµÑ€ (Ð²Ð¸Ð´ 8)"})]})]})]})},le=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M12 4a2 2 0 1 0 0 4 2 2 0 0 0 0-4Zm-2.5 6.5a2.5 2.5 0 1 0 5 0 2.5 2.5 0 0 0-5 0ZM12 1a9 9 0 0 0-9 9v6.5a2.5 2.5 0 0 0 2.5 2.5h13A2.5 2.5 0 0 0 21 16.5V10a9 9 0 0 0-9-9Zm7 15.5H5a.5.5 0 0 1-.5-.5V10a7 7 0 0 1 14 0v6a.5.5 0 0 1-.5.5Z",clipRule:"evenodd"})}),ne=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M12 6a3.5 3.5 0 1 0 0 7 3.5 3.5 0 0 0 0-7Zm-5.5 9.5a1.5 1.5 0 0 1 1.5-1.5h8a1.5 1.5 0 0 1 1.5 1.5v.055A7.002 7.002 0 0 1 12 20a7.002 7.002 0 0 1-5.5-2.445V15.5ZM12 4a5.5 5.5 0 1 0 0 11 5.5 5.5 0 0 0 0-11Z",clipRule:"evenodd"})}),ie=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6",children:e.jsx("path",{d:"M3.478 2.404a.75.75 0 0 0-.926.941l2.432 7.905H13.5a.75.75 0 0 1 0 1.5H4.984l-2.432 7.905a.75.75 0 0 0 .926.94 60.519 60.519 0 0 0 18.445-8.986.75.75 0 0 0 0-1.218A60.517 60.517 0 0 0 3.478 2.404Z"})}),re=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:e.jsx("path",{fillRule:"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}),O=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:e.jsx("path",{fillRule:"evenodd",d:"M18.97 3.659a2.25 2.25 0 0 0-3.182 0l-10.94 10.94a3.75 3.75 0 1 0 5.304 5.303l7.693-7.693a.75.75 0 0 1 1.06 1.06l-7.693 7.693a5.25 5.25 0 1 1-7.424-7.424l10.939-10.94a3.75 3.75 0 1 1 5.303 5.304L9.097 18.835l-.008.008-.007.007-.002.002-.003.002A2.25 2.25 0 0 1 5.91 15.66l7.81-7.81a.75.75 0 0 1 1.061 1.06l-7.81 7.81a.75.75 0 0 0 1.054 1.068L18.97 6.84a2.25 2.25 0 0 0 0-3.182Z",clipRule:"evenodd"})}),H=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-4 h-4",children:e.jsx("path",{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"})}),oe=()=>e.jsxs("div",{className:"flex items-center space-x-1.5",children:[e.jsx("div",{className:"h-2 w-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.3s]"}),e.jsx("div",{className:"h-2 w-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.15s]"}),e.jsx("div",{className:"h-2 w-2 bg-gray-400 rounded-full animate-bounce"})]}),ce=({message:n,isLoading:h,isStreaming:y})=>{const d=n.role==="user";return n.role==="system"?e.jsx("div",{className:"text-center text-sm text-gray-500 my-4 italic",children:n.text}):e.jsxs("div",{className:`flex items-start gap-3 ${d?"justify-end":""}`,children:[!d&&e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-700 flex-shrink-0 flex items-center justify-center mt-1",children:e.jsx(le,{})}),e.jsxs("div",{className:`max-w-xl w-fit p-3 rounded-2xl ${d?"chat-bubble-gradient text-white rounded-br-lg":"bg-gray-700 text-gray-200 rounded-bl-lg"}`,children:[n.files&&n.files.length>0&&e.jsx("div",{className:"mb-2 flex flex-wrap gap-2",children:n.files.map((x,f)=>e.jsx("div",{className:"relative",children:x.preview?e.jsx("img",{src:x.preview,alt:x.name,className:"max-w-xs max-h-48 rounded-lg"}):e.jsxs("div",{className:"bg-gray-600 px-3 py-2 rounded-lg text-sm flex items-center gap-2",children:[e.jsx(O,{}),e.jsx("span",{className:"truncate max-w-[200px]",children:x.name})]})},f))}),e.jsxs("p",{className:"whitespace-pre-wrap break-words",children:[n.text,h&&y&&!d&&e.jsx("span",{className:"inline-block w-1 h-4 bg-white animate-pulse ml-1 align-middle","aria-label":"typing indicator"})]}),h&&!y&&!d&&e.jsx(oe,{})]}),d&&e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-500 flex-shrink-0 flex items-center justify-center mt-1",children:e.jsx(ne,{})})]})};function de(){const n={id:"init",role:"system",text:"Session started. Type a message to begin chatting with Gemini."},[h,y]=l.useState("chat"),[d,u]=l.useState([n]),[x,f]=l.useState(""),[i,j]=l.useState(!1),[v,D]=l.useState(T[0]),[C,R]=l.useState([]),I=l.useRef(null),A=l.useRef(null),S=l.useRef(null),w=l.useRef(null);l.useEffect(()=>{var a;(a=A.current)==null||a.scrollTo({top:A.current.scrollHeight,behavior:"smooth"})},[d]),l.useEffect(()=>{S.current&&(S.current.style.height="auto",S.current.style.height=`${S.current.scrollHeight}px`)},[x]);const $=()=>{I.current=null,u([n]),j(!1)},g=a=>{a.id!==v.id&&(D(a),I.current=null,u([{id:"mode-change-"+Date.now(),role:"system",text:`Model changed to ${a.name}. A new chat session has started.`}]),j(!1))},G=async a=>{const o=a.target.files;if(!o||o.length===0)return;const N=[];for(let b=0;b<o.length;b++){const m=o[b],M=new FileReader;await new Promise(k=>{M.onload=s=>{var p;const t=(p=s.target)==null?void 0:p.result,r=t.split(",")[1],c={name:m.name,type:m.type,data:r};m.type.startsWith("image/")&&(c.preview=t),N.push(c),k()},M.readAsDataURL(m)})}R(b=>[...b,...N]),w.current&&(w.current.value="")},F=a=>{R(o=>o.filter((N,b)=>b!==a))},P=async a=>{a.preventDefault();const o=x.trim();if(!o&&C.length===0||i)return;const N={id:Date.now().toString(),role:"user",text:o||"(attached files)",files:C.length>0?[...C]:void 0};u(m=>[...m,N]),f(""),R([]),j(!0);const b=(Date.now()+1).toString();u(m=>[...m,{id:b,role:"model",text:""}]);try{if(!I.current)throw new Error("API_KEY is not set. Please ensure VITE_API_KEY is configured in your .env file.");let m;if(N.files&&N.files.length>0){const s=[];o&&s.push({text:o}),N.files.forEach(t=>{s.push({inlineData:{mimeType:t.type,data:t.data}})}),m={message:s}}else m={message:o};const M=await I.current.sendMessageStream(m);let k="";for await(const s of M)k+=s.text,u(t=>t.map(r=>r.id===b?{...r,text:k}:r))}catch(m){console.error(m);const M=m instanceof Error?m.message:"An unknown error occurred.",k={id:"error-"+Date.now(),role:"system",text:`Error: ${M}. Please check your API key configuration.`};u(s=>s.filter(t=>t.id!==b).concat(k))}finally{j(!1)}};return e.jsxs("div",{className:"bg-gray-900 text-gray-200 h-full flex flex-col antialiased",children:[e.jsxs("header",{className:"p-4 border-b border-gray-800 bg-gray-900/80 backdrop-blur-sm sticky top-0 z-10",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-lg font-bold text-white",children:"Gemini Chat"}),e.jsx("div",{className:"flex items-center gap-4",children:h==="chat"&&e.jsxs(e.Fragment,{children:[e.jsx(te,{modes:T,selectedMode:v,onSelect:g}),e.jsxs("button",{onClick:$,className:"flex items-center gap-2 px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-sm font-medium transition-colors",children:[e.jsx(re,{}),"New Chat"]})]})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>y("chat"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${h==="chat"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Chat"}),e.jsx("button",{onClick:()=>y("invoice"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${h==="invoice"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Invoice Extractor"})]})]}),h==="chat"?e.jsxs(e.Fragment,{children:[e.jsx("main",{ref:A,className:"flex-1 p-4 md:p-6 overflow-y-auto space-y-6",children:d.map((a,o)=>e.jsx(ce,{message:a,isLoading:i&&o===d.length-1,isStreaming:a.text.length>0},a.id))}),e.jsx("footer",{className:"p-4 md:p-6 border-t border-gray-800 bg-gray-900",children:e.jsxs("form",{onSubmit:P,className:"max-w-3xl mx-auto",children:[C.length>0&&e.jsx("div",{className:"mb-3 flex flex-wrap gap-2",children:C.map((a,o)=>e.jsx("div",{className:"relative group",children:a.preview?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:a.preview,alt:a.name,className:"h-20 w-20 object-cover rounded-lg"}),e.jsx("button",{type:"button",onClick:()=>F(o),className:"absolute -top-2 -right-2 bg-red-500 hover:bg-red-600 rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(H,{})})]}):e.jsxs("div",{className:"relative bg-gray-700 px-3 py-2 rounded-lg text-sm flex items-center gap-2",children:[e.jsx(O,{}),e.jsx("span",{className:"truncate max-w-[150px]",children:a.name}),e.jsx("button",{type:"button",onClick:()=>F(o),className:"ml-2 text-red-400 hover:text-red-300",children:e.jsx(H,{})})]})},o))}),e.jsxs("div",{className:"flex items-end gap-3",children:[e.jsx("input",{ref:w,type:"file",multiple:!0,accept:"image/*,.pdf,.txt,.doc,.docx",onChange:G,className:"hidden","aria-label":"File input"}),e.jsx("button",{type:"button",onClick:()=>{var a;return(a=w.current)==null?void 0:a.click()},disabled:i,className:"w-12 h-12 rounded-full bg-gray-700 hover:bg-gray-600 flex items-center justify-center transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Attach file",children:e.jsx(O,{})}),e.jsx("div",{className:"flex-1 bg-gray-800 rounded-2xl p-1 flex items-end",children:e.jsx("textarea",{ref:S,value:x,onChange:a=>f(a.target.value),onKeyDown:a=>{a.key==="Enter"&&!a.shiftKey&&(a.preventDefault(),P(a))},placeholder:"Message Gemini...",className:"w-full bg-transparent p-2 resize-none border-none focus:ring-0 focus:outline-none placeholder-gray-500 max-h-48",rows:1,disabled:i,"aria-label":"Chat input"})}),e.jsx("button",{type:"submit",disabled:i||!x.trim()&&C.length===0,className:"w-12 h-12 rounded-full flex items-center justify-center transition-colors disabled:opacity-50 disabled:cursor-not-allowed chat-bubble-gradient text-white","aria-label":"Send message",children:e.jsx(ie,{})})]})]})})]}):e.jsx("main",{className:"flex-1 overflow-y-auto",children:e.jsx(ae,{})})]})}const U=document.getElementById("root");U&&J.createRoot(U).render(e.jsx(Q.StrictMode,{children:e.jsx(de,{})}));
